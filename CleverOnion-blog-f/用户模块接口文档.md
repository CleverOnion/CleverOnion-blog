# 用户模块接口文档

## 概述

用户模块提供用户管理相关的RESTful API接口，包括用户列表查询、用户详情获取和用户统计等功能。

**基础路径**: `/users`

**版本**: 1.0.0

---

## 接口列表

### 1. 分页获取用户列表

**接口描述**: 分页查询用户列表

**请求信息**:
- **URL**: `GET /users`
- **Content-Type**: `application/json`

**请求参数**:

| 参数名 | 类型 | 必填 | 默认值 | 描述 |
|--------|------|------|--------|---------|
| page | Integer | 否 | 0 | 页码（从0开始） |
| size | Integer | 否 | 10 | 每页大小（1-100） |

**请求示例**:
```http
GET /users?page=0&size=10
```

**响应格式**:
```json
{
  "success": true,
  "message": "用户列表查询成功",
  "data": {
    "users": [
      {
        "id": 1,
        "gitHubId": 12345678,
        "username": "john_doe",
        "avatarUrl": "https://avatars.githubusercontent.com/u/12345678?v=4"
      },
      {
        "id": 2,
        "gitHubId": 87654321,
        "username": "jane_smith",
        "avatarUrl": "https://avatars.githubusercontent.com/u/87654321?v=4"
      }
    ],
    "totalCount": 25,
    "currentPage": 0,
    "pageSize": 10,
    "totalPages": 3,
    "hasNext": true,
    "hasPrevious": false
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

**响应字段说明**:

| 字段名 | 类型 | 描述 |
|--------|------|---------|
| success | Boolean | 请求是否成功 |
| message | String | 响应消息 |
| data.users | Array | 用户列表 |
| data.users[].id | Long | 用户ID |
| data.users[].gitHubId | Long | GitHub用户ID |
| data.users[].username | String | 用户名 |
| data.users[].avatarUrl | String | 头像URL |
| data.totalCount | Long | 总记录数 |
| data.currentPage | Integer | 当前页码 |
| data.pageSize | Integer | 每页大小 |
| data.totalPages | Integer | 总页数 |
| data.hasNext | Boolean | 是否有下一页 |
| data.hasPrevious | Boolean | 是否有上一页 |
| timestamp | String | 响应时间戳 |

**错误响应**:
```json
{
  "success": false,
  "message": "页码不能小于0",
  "data": null,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

**状态码**:
- `200`: 查询成功
- `400`: 请求参数错误
- `500`: 服务器内部错误

---

### 2. 获取用户详情

**接口描述**: 根据用户ID获取用户详细信息

**请求信息**:
- **URL**: `GET /users/{id}`
- **Content-Type**: `application/json`

**路径参数**:

| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|---------|
| id | Long | 是 | 用户ID |

**请求示例**:
```http
GET /users/1
```

**响应格式**:
```json
{
  "success": true,
  "message": "用户详情查询成功",
  "data": {
    "id": 1,
    "gitHubId": 12345678,
    "username": "john_doe",
    "avatarUrl": "https://avatars.githubusercontent.com/u/12345678?v=4"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}
```

**响应字段说明**:

| 字段名 | 类型 | 描述 |
|--------|------|---------|
| success | Boolean | 请求是否成功 |
| message | String | 响应消息 |
| data.id | Long | 用户ID |
| data.gitHubId | Long | GitHub用户ID |
| data.username | String | 用户名 |
| data.avatarUrl | String | 头像URL |
| timestamp | String | 响应时间戳 |

**错误响应**:
```json
{
  "success": false,
  "message": "用户不存在",
  "data": null,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

**状态码**:
- `200`: 查询成功
- `404`: 用户不存在
- `400`: 请求参数错误
- `500`: 服务器内部错误

---

### 3. 获取用户总数

**接口描述**: 统计系统中用户的总数量

**请求信息**:
- **URL**: `GET /users/count`
- **Content-Type**: `application/json`

**请求参数**: 无

**请求示例**:
```http
GET /users/count
```

**响应格式**:
```json
{
  "success": true,
  "message": "用户总数统计成功",
  "data": 25,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

**响应字段说明**:

| 字段名 | 类型 | 描述 |
|--------|------|---------|
| success | Boolean | 请求是否成功 |
| message | String | 响应消息 |
| data | Long | 用户总数 |
| timestamp | String | 响应时间戳 |

**状态码**:
- `200`: 统计成功
- `500`: 服务器内部错误

---

## 数据模型

### UserResponse

用户响应数据模型

```json
{
  "id": 1,
  "gitHubId": 12345678,
  "username": "john_doe",
  "avatarUrl": "https://avatars.githubusercontent.com/u/12345678?v=4"
}
```

| 字段名 | 类型 | 描述 | 示例 |
|--------|------|------|---------|
| id | Long | 用户唯一标识 | 1 |
| gitHubId | Long | GitHub用户ID | 12345678 |
| username | String | 用户名 | "john_doe" |
| avatarUrl | String | 头像URL | "https://avatars.githubusercontent.com/u/12345678?v=4" |

### UserListResponse

用户列表响应数据模型

```json
{
  "users": [UserResponse],
  "totalCount": 25,
  "currentPage": 0,
  "pageSize": 10,
  "totalPages": 3,
  "hasNext": true,
  "hasPrevious": false
}
```

| 字段名 | 类型 | 描述 | 示例 |
|--------|------|------|---------|
| users | Array<UserResponse> | 用户列表 | [UserResponse] |
| totalCount | Long | 总记录数 | 25 |
| currentPage | Integer | 当前页码（从0开始） | 0 |
| pageSize | Integer | 每页大小 | 10 |
| totalPages | Integer | 总页数 | 3 |
| hasNext | Boolean | 是否有下一页 | true |
| hasPrevious | Boolean | 是否有上一页 | false |

---

## 错误码说明

| 错误码 | 错误信息 | 描述 |
|--------|----------|------|
| 400 | 页码不能小于0 | 分页参数page小于0 |
| 400 | 每页大小必须大于0 | 分页参数size小于等于0 |
| 400 | 每页大小不能超过100 | 分页参数size大于100 |
| 400 | 用户ID不能为空 | 路径参数id为空或无效 |
| 404 | 用户不存在 | 指定ID的用户不存在 |
| 500 | 获取用户列表失败，请稍后重试 | 服务器内部错误 |
| 500 | 获取用户详情失败，请稍后重试 | 服务器内部错误 |
| 500 | 获取用户总数失败，请稍后重试 | 服务器内部错误 |

---

## 使用示例

### 1. 获取第一页用户列表（每页10条）

```bash
curl -X GET "http://localhost:8080/users?page=0&size=10" \
     -H "Content-Type: application/json"
```

### 2. 获取指定用户详情

```bash
curl -X GET "http://localhost:8080/users/1" \
     -H "Content-Type: application/json"
```

### 3. 获取用户总数

```bash
curl -X GET "http://localhost:8080/users/count" \
     -H "Content-Type: application/json"
```

### 4. JavaScript 示例

```javascript
// 获取用户列表
async function getUserList(page = 0, size = 10) {
  try {
    const response = await fetch(`/users?page=${page}&size=${size}`);
    const result = await response.json();
    
    if (result.success) {
      console.log('用户列表:', result.data.users);
      console.log('总数:', result.data.totalCount);
      return result.data;
    } else {
      console.error('获取用户列表失败:', result.message);
    }
  } catch (error) {
    console.error('请求失败:', error);
  }
}

// 获取用户详情
async function getUserDetail(userId) {
  try {
    const response = await fetch(`/users/${userId}`);
    const result = await response.json();
    
    if (result.success) {
      console.log('用户详情:', result.data);
      return result.data;
    } else {
      console.error('获取用户详情失败:', result.message);
    }
  } catch (error) {
    console.error('请求失败:', error);
  }
}

// 获取用户总数
async function getUserCount() {
  try {
    const response = await fetch('/users/count');
    const result = await response.json();
    
    if (result.success) {
      console.log('用户总数:', result.data);
      return result.data;
    } else {
      console.error('获取用户总数失败:', result.message);
    }
  } catch (error) {
    console.error('请求失败:', error);
  }
}
```

---

## 注意事项

1. **分页参数限制**:
   - `page` 参数必须大于等于0
   - `size` 参数必须在1-100之间
   - 建议每页大小不超过50，以保证良好的性能

2. **用户ID格式**:
   - 用户ID必须是有效的Long类型数值
   - 不存在的用户ID会返回404错误

3. **性能考虑**:
   - 分页查询已进行性能优化
   - 建议客户端实现适当的缓存机制
   - 避免频繁请求大量数据

4. **安全性**:
   - 所有接口都经过统一的异常处理
   - 敏感信息已进行适当的过滤
   - 建议在生产环境中配置适当的访问控制

---

## 更新日志

### v1.0.0 (2024-01-15)
- 初始版本发布
- 实现用户列表分页查询接口
- 实现用户详情查询接口
- 实现用户总数统计接口
- 完善错误处理和响应格式

---

**文档生成时间**: 2024-01-15

**维护者**: CleverOnion Team

**联系方式**: 如有问题请联系开发团队